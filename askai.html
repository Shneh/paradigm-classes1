<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ask AI | Paradigm Classes</title>

<link rel="stylesheet" href="css/styles.css">

<style>

/* Chat layout */
.chat-container {
    max-width: 900px;
    margin: 120px auto 40px;
    padding: 20px;
}

.chat-box {
    height: 500px;
    overflow-y: auto;
    border-radius: 12px;
    padding: 20px;
    background: #f5f7fb;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* Messages */
.message {
    margin-bottom: 15px;
    padding: 12px 16px;
    border-radius: 10px;
    max-width: 75%;
    line-height: 1.5;
}

.user-message {
    background: #2563eb;
    color: white;
    margin-left: auto;
}

.ai-message {
    background: white;
    border: 1px solid #ddd;
}

/* Input */
.chat-input-container {
    display: flex;
    margin-top: 15px;
    gap: 10px;
}

.chat-input {
    flex: 1;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
}

.send-btn {
    padding: 12px 20px;
    background: #2563eb;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.send-btn:hover {
    background: #1d4ed8;
}

/* typing */
.typing {
    font-style: italic;
    color: gray;
}

</style>

</head>
<body>

<!-- Navbar -->
<nav class="navbar">
        <div class="container" data-aos="fade-up">
            <div class="nav-wrapper" data-aos="fade-up">
                
                <div class="logo" data-aos="fade-up">
                    <img alt="Paradigm Classes Logo" class="logo-img" src="images/logo.png" />
                    <div data-aos="fade-up">
                        <div class="logo-primary" data-aos="fade-up">PARADIGM</div>
                        <div class="logo-secondary" data-aos="fade-up">CLASSES</div>
                    </div>
                </div>
                <div class="nav-links" data-aos="fade-up">
                    <a class="nav-link" href="index.html">Home</a>
                    <a class="nav-link" href="index.html#courses">Courses</a>
                    <a class="nav-link" href="study-notes.html">Notes</a>
                    <a class="nav-link" href="video-lectures.html">Videos</a>
                    <a class="nav-link" href="gallery.html">Gallery</a>
                    <a class="nav-link" href="askai.html">Ask AI</a>
                    <a class="nav-link" href="faculty.html">Faculty</a>
                    <a class="nav-link" href="index.html#contact">Contact</a>
                </div>
                <div class="nav-cta" data-aos="fade-up">
                    <a class="btn btn-primary" href="login.html">LOGIN</a>
                </div>
            </div>
        </div>
    </nav>

<!-- Chat -->
<section class="ai-section">

    <div class="ai-wrapper">

        <!-- Left Info Panel -->
         
        <div class="ai-info">

            <h2>Paradigm AI Doubt Solver</h2>

            <p>
                Ask doubts in Physics, Chemistry, Mathematics,
                NDA, GATE, or Computer Science.
            </p>

            <div class="ai-tags">
                <span>Physics</span>
                <span>Chemistry</span>
                <span>Mathematics</span>
                <span>NDA</span>
                <span>GATE</span>
                <span>Computer Science</span>
            </div>

        </div>

        <!-- Chat Panel -->
        <div class="ai-chat">

            <div class="chat-header">
                <div class="ai-status">
                    <span class="dot"></span>
                    AI Online
                </div>
            </div>

            <div id="chat-box" class="chat-box">
            <div class="message ai-message">

                Welcome to Paradigm AI ðŸŽ“  

                You can ask:  
                â€¢ Numerical problems  
                â€¢ Theory doubts  
                â€¢ NDA questions  
                â€¢ Programming doubts  

                </div>
            </div>

            <div class="chat-input-area">

    <select id="subject-select">
        <option value="general">General</option>
        <option value="physics">Physics</option>
        <option value="chemistry">Chemistry</option>
        <option value="math">Mathematics</option>
        <option value="cs">Computer Science</option>
        <option value="nda">NDA</option>
        <option value="gate">GATE</option>
    </select>

    <input 
        type="text" 
        id="chat-input"
        placeholder="Type your doubt here..."
    >

    <button onclick="sendMessage()">Send</button>

</div>

        </div>

    </div>

</section>

<script>

const API_URL = "http://localhost:5000/api/chat"; // change after deployment

const chatBox = document.getElementById("chat-box");
const input = document.getElementById("chat-input");

function addMessage(text, type) {

    const msg = document.createElement("div");

    msg.classList.add("message");

    if(type === "user")
        msg.classList.add("user-message");
    else
        msg.classList.add("ai-message");

    msg.innerText = text;

    chatBox.appendChild(msg);

    chatBox.scrollTop = chatBox.scrollHeight;
}

function showTyping() {

    const typing = document.createElement("div");

    typing.classList.add("message","ai-message","typing");

    typing.id = "typing";

    typing.innerText = "AI is typing...";

    chatBox.appendChild(typing);

}

function removeTyping() {

    const typing = document.getElementById("typing");

    if(typing) typing.remove();
}

async function sendMessage(){

    const input = document.getElementById("chat-input");

    const subject = document.getElementById("subject-select").value;

    const message = input.value.trim();

    if(!message) return;

    addMessage(message,"user");

    input.value = "";

    showTyping();

    const res = await fetch("http://localhost:5000/api/chat",{

        method:"POST",

        headers:{
            "Content-Type":"application/json"
        },

        body:JSON.stringify({
            message: message,
            subject: subject
        })

    });

    const data = await res.json();

    document.getElementById("typing").remove();

    addMessage(data.reply,"ai");

}

input.addEventListener("keypress",function(e){

    if(e.key === "Enter")
        sendMessage();

});
function showTyping(){

    const typing = document.createElement("div");

    typing.className = "message ai-message";

    typing.id = "typing";

    typing.innerHTML = `
        <span class="typing-dot"></span>
        <span class="typing-dot"></span>
        <span class="typing-dot"></span>
    `;

    chatBox.appendChild(typing);

}

</script>

</body>
</html>